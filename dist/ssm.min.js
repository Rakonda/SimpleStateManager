/*! simplestatemanager | license: MIT | version: 3.0.0 | build date: 2015-06-03 */
!function(a,b,c,d){"function"==typeof define&&define.amd?define(function(){return d(a,b,c)}):"object"==typeof exports?module.exports=d:a.ssm=d(a,b,c)}(window,document,void 0,function(a,b,c){"use strict";function d(a){this.id=a.id||h(),this.query=a.query||"",delete a.id,delete a.query;var b={onEnter:[],onLeave:[],onResize:[],onFirstRun:[]};return this.options=g(b,a),"function"==typeof this.options.onEnter&&(this.options.onEnter=[this.options.onEnter]),"function"==typeof this.options.onLeave&&(this.options.onLeave=[this.options.onLeave]),"function"==typeof this.options.onResize&&(this.options.onResize=[this.options.onResize]),"function"==typeof this.options.onFirstRun&&(this.options.onFirstRun=[this.options.onFirstRun]),this.testConfigOptions("once")===!1?(this.valid=!1,!1):(this.valid=!0,this.active=!1,void this.init())}function e(b){this.states=[],this.resizeTimer=null,this.configOptions=[],a.addEventListener("resize",j(this.resizeBrowser.bind(this),k),!0)}function f(a,b,c){for(var d=a.length,e=[],f=0;d>f;f++){var g=a[f];g[b]&&g[b]===c&&e.push(g)}return e}function g(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}function h(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;10>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}function i(a){for(var b=a.length,c=0;b>c;c++)a[c]()}function j(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}var k=25;return d.prototype={init:function(){this.test=a.matchMedia(this.query),this.test.matches&&this.testConfigOptions("match")&&this.enterState(),this.listener=this.test.addListener(function(a){a.matches?this.testConfigOptions("match")&&this.enterState():this.leaveState()}.bind(this))},enterState:function(){i(this.options.onFirstRun),i(this.options.onEnter),this.options.onFirstRun=[],this.active=!0},leaveState:function(){i(this.options.onLeave),this.active=!1},resizeState:function(){this.testConfigOptions("resize")&&i(this.options.onResize)},destroy:function(){this.test.removeListener(this.listener)},testConfigOptions:function(a){for(var b=this.configOptions.length,c=0;b>c;c++){var d=this.configOptions[c];if("undefined"!=typeof this.options[d.name]&&d.when===a&&d.test.bind(this)()===!1)return!1}return!0},configOptions:[]},e.prototype={addState:function(a){var b=new d(a);return b.valid&&this.states.push(b),b},addStates:function(a){for(var b=a.length-1;b>=0;b--)this.addState(a[b]);return this},getState:function(a){for(var b=this.states.length-1;b>=0;b--){var c=this.states[b];if(c.id===a)return c}},getStates:function(a){var b=null,c=[];if("undefined"==typeof a)return this.states;b=a.length;for(var d=0;b>d;d++)c.push(this.getState(a[d]));return c},removeState:function(a){for(var b=this.states.length-1;b>=0;b--){var c=this.states[b];c.id===a&&(c.destroy(),this.states.splice(b,1))}return this},removeAllStates:function(){for(var a=this.states.length-1;a>=0;a--){var b=this.states[a];b.destroy()}this.states=[]},addConfigOption:function(a){var b={name:"",test:null,when:"resize"};a=g(b,a),""!==a.name&&null!==a.test&&d.prototype.configOptions.push(a)},removeConfigOption:function(a){for(var b=d.prototype.configOptions,c=b.length-1;c>=0;c--)b[c].name===a&&b.splice(c,1);d.prototype.configOptions=b},getConfigOption:function(a){var b=d.prototype.configOptions;if("string"!=typeof a)return b;for(var c=b.length-1;c>=0;c--)if(b[c].name===a)return b[c]},getConfigOptions:function(){return d.prototype.configOptions},resizeBrowser:function(){for(var a=f(this.states,"active",!0),b=a.length,c=0;b>c;c++)a[c].resizeState()}},new e});